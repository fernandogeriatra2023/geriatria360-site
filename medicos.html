<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Área Médica — Geriatria 360</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
<header class="top">
  <div class="container top__row">
    <div class="brand">Área Médica</div>
    <nav class="nav">
      <a href="index.html">Início</a>
      <a href="#" class="btn" id="btnPrint">Imprimir/Salvar PDF</a>
    </nav>
  </div>
</header>

<section class="section">
  <div class="container">
    <!-- Login simples -->
    <div class="card" style="margin-bottom:16px">
      <div class="seg">
        <input id="med-pass" type="password" placeholder="Senha (protótipo: medico123)"/>
        <button class="btn primary" onclick="loginMed()">Entrar</button>
      </div>
      <small class="hint">Senha definida em <code>data.json</code>.</small>
    </div>

    <div id="app" style="display:none">
      <!-- Tabs -->
      <div class="steps hide-print">
        <span class="step active" data-tab="t-evol" onclick="tab(this)">Evolução</span>
        <span class="step" data-tab="t-exames" onclick="tab(this)">Solicitação de Exames</span>
        <span class="step" data-tab="t-receita" onclick="tab(this)">Receita</span>
        <span class="step" data-tab="t-docs" onclick="tab(this)">Documentos</span>
        <span class="step" data-tab="t-hist" onclick="tab(this)">Histórico</span>
      </div>

      <!-- Identificação básica -->
      <div class="grid g3 card" style="margin-bottom:16px">
        <div><label>ID do Paciente</label><input id="pid" placeholder="AB-001"/></div>
        <div><label>Idade</label><input id="age" type="number" min="0" value="75"/></div>
        <div><label>Escolaridade (anos)</label><input id="edu" type="number" min="0" value="8"/></div>
      </div>

      <!-- EVOLUÇÃO -->
      <div id="t-evol" class="sect">
        <div class="card">
          <h3 class="h2">Evolução</h3>
          <div class="seg" style="margin-bottom:10px">
            <input id="cidSearch" placeholder="Digite código (ex.: z000) ou descrição do CID-10"/>
            <div id="cidResults" class="dropdown"></div>
            <button class="btn" onclick="pickFirstCid()">Adicionar</button>
          </div>
          <div id="cidChips" class="seg" style="margin-bottom:10px"></div>
          <textarea id="evolText" class="editor" placeholder="Texto da evolução..."></textarea>
          <div class="seg" style="margin-top:10px">
            <button class="btn primary" onclick="saveEvolution()">Salvar evolução</button>
            <button class="btn" onclick="generateAIReport()">Gerar Laudo (IA)</button>
          </div>
        </div>
      </div>

      <!-- EXAMES -->
      <div id="t-exames" class="sect" style="display:none">
        <div class="card">
          <h3 class="h2">Solicitação de Exames</h3>
          <div class="seg">
            <input id="examInput" placeholder="Ex.: Hemograma, TSH, Vitamina B12..."/>
            <button class="btn" onclick="addExam()">Adicionar</button>
          </div>
          <ul id="examList" class="list-simple"></ul>
          <div class="seg" style="margin-top:10px">
            <button class="btn primary" onclick="saveExams()">Salvar solicitação</button>
          </div>
        </div>
      </div>

      <!-- RECEITA -->
      <div id="t-receita" class="sect" style="display:none">
        <div class="card">
          <h3 class="h2">Receita</h3>
          <div class="seg">
            <input id="rxMed" placeholder="Fármaco / Apresentação"/>
            <input id="rxDose" placeholder="Posologia"/>
            <input id="rxDur"  placeholder="Duração (ex.: 30 dias)"/>
            <button class="btn" onclick="addRx()">Adicionar</button>
          </div>
          <ul id="rxList" class="list-simple"></ul>
          <div class="seg" style="margin-top:10px">
            <button class="btn primary" onclick="saveRx()">Salvar receita</button>
          </div>
        </div>
      </div>

      <!-- DOCUMENTOS -->
      <div id="t-docs" class="sect" style="display:none">
        <div class="grid g3">
          <div class="card">
            <h3 class="h2">Atestado</h3>
            <label>Dias de afastamento</label>
            <input id="docDays" type="number" min="1" value="3"/>
            <label>Motivo/diagnóstico</label>
            <textarea id="docReason" rows="4" placeholder="CID + descrição"></textarea>
            <button class="btn primary" onclick="saveDoc()">Gerar Atestado</button>
          </div>
          <div class="card">
            <h3 class="h2">Imagens anexas</h3>
            <label class="btn">Anexar imagem<input type="file" hidden id="docUpload" accept="image/*" onchange="attachDocImg(event)"/></label>
            <div id="docImgs" class="seg" style="margin-top:10px"></div>
          </div>
          <div class="card">
            <h3 class="h2">Ações</h3>
            <div class="seg">
              <button class="btn" onclick="printPage()">Imprimir</button>
              <button class="btn" onclick="resetForms()">Limpar</button>
            </div>
          </div>
        </div>
      </div>

      <!-- HISTÓRICO -->
      <div id="t-hist" class="sect" style="display:none">
        <div class="card">
          <h3 class="h2">Histórico local</h3>
          <table class="table" id="histTbl">
            <thead><tr><th>Paciente</th><th>Item</th><th>Data</th><th>Ações</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

    </div><!-- #app -->
  </div>
</section>

<script src="app.js"></script>
</body>
</html>
